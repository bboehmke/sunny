<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 790 440"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">

    <defs>
        <style type="text/css">
            .greenEnergyBackground {
                fill: #3d9119;
            }
            .greenEnergyStroke {
                stroke: grey;
            }
            .redEnergyBackground {
                fill: #b93414;
            }
            .redEnergyStroke {
                stroke: grey;
            }
        </style>

        <symbol id="sun">
            <defs>
                <line id="sun_line"
                      x1="0" y1="0"
                      x2="0" y2="25"
                      stroke="white" stroke-width="13" stroke-linecap="round"/>
            </defs>
            <circle cx="100" cy="100" r="40"
                    fill="white"/>

            <use xlink:href="#sun_line" x="100" y="20"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(45,100,100)"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(90,100,100)"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(135,100,100)"/>

            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(180,100,100)"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(225,100,100)"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(270,100,100)"/>
            <use xlink:href="#sun_line" x="100" y="20" transform="rotate(315,100,100)"/>
        </symbol>
        <symbol id="house">
            <path d="M80,40 v-28"
                  stroke="white" stroke-width="9"/>

            <path d="M5,65 l50,-50 l50,50"
                  stroke="white" stroke-width="9" stroke-linecap="round"
                  fill="none"/>

            <path d="M10,74 l45,-45 l45,45 l0,40 h-90 z
                     M45,120 h20 v-35 h-20 z"
                  fill="white"
                  stroke="white" stroke-width="4" stroke-linejoin="round"/>
        </symbol>
        <symbol id="power_pole">
            <path d="M54,150 l21,-110 l21,110"
                  stroke="white" stroke-width="4"
                  stroke-linejoin="round" stroke-linecap="round"
                  fill="none"/>

            <path d="M55,146 l33,-30 l-22,-25"
                  stroke="white" stroke-width="3"
                  stroke-linejoin="round" stroke-linecap="round"
                  fill="none"/>
            <path d="M95,146 l-33,-30 l22,-25"
                  stroke="white" stroke-width="3"
                  stroke-linejoin="round" stroke-linecap="round"
                  fill="none"/>

            <path d="M50,50 l50,0"
                  stroke="white" stroke-width="3" stroke-linecap="round"
                  fill="none"/>
            <circle cx="55" cy="53" r="2" fill="white"/>
            <circle cx="95" cy="53" r="2" fill="white"/>

            <path d="M35,80 l80,0"
                  stroke="white" stroke-width="3" stroke-linecap="round"
                  fill="none"/>
            <circle cx="40" cy="83" r="2" fill="white"/>
            <circle cx="55" cy="83" r="2" fill="white"/>
            <circle cx="95" cy="83" r="2" fill="white"/>
            <circle cx="110" cy="83" r="2" fill="white"/>
        </symbol>
        <symbol id="battery">

            <rect x="20" y="5" width="16" height="10"
                  stroke-width="5" stroke="white" fill="none"/>

            <rect id="battery_charge_img"
                  x="15" y="20" width="25" height="42"
                  stroke-width="5" fill="white" transform="rotate(180, 27.5, 70)"/>

            <rect x="10" y="15" width="35" height="110"
                  stroke-width="5" stroke="white" fill="none"/>
        </symbol>

        <pattern id="transferPattern" x="0" y="0" width="20" height="40"
                 patternUnits="userSpaceOnUse">
            <!--<animateTransform attributeType="xml"
                              attributeName="patternTransform"
                              type="translate" from="0" to="1000" begin="0"
                              dur="100s" repeatCount="indefinite"/>-->
            <path d="M0,0 l12,20 l-12,20" stroke="white" stroke-width="3" fill="none"/>
        </pattern>

        <symbol id="arrow">
            <path d="M5,10 h25 v-10 l20,20 l-20,20 v-10 h-25 z"
                  stroke-width="2"/>
        </symbol>
        <symbol id="arrow_long">
            <path d="M5,10 h390 v-10 l20,20 l-20,20 v-10 h-390 z"
                  stroke-width="2"/>
        </symbol>

        <clipPath id="clipGreen" clipPathUnits="objectBoundingBox">
            <rect id="home_green" width="0.555" height="1"/>
        </clipPath>
        <clipPath id="clipRed" clipPathUnits="objectBoundingBox">
            <rect id="home_red" width="0.4451" height="1"/>
        </clipPath>

        <g id="solar_field">
            <rect width="130" height="300" rx="10" fill="grey"/>
            <rect id="solar_green"
                  width="130" height="300" rx="10"
                  class="greenEnergyBackground greenEnergyStroke"/>

            <text x="65" y="40" text-anchor="middle"
                  fill="white"
                  font-family="sans-serif" font-size="15">Solar</text>

            <use xlink:href="#sun" x="25" y="130" transform="scale(.5)"/>

            <text id="solar_power"
                  x="65" y="220" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="25">12.345</text>
            <text x="65" y="260" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="20">W</text>
        </g>
        <g id="supplier_field">
            <rect width="130" height="300" rx="10" fill="grey"/>
            <rect id="supplier_red"
                  width="130" height="300" rx="10"
                  class="redEnergyBackground redEnergyStroke"/>
            <rect id="supplier_green"
                  width="130" height="300" rx="10"
                  class="greenEnergyBackground greenEnergyStroke"/>

            <text x="65" y="40" text-anchor="middle"
                  fill="white"
                  font-family="sans-serif" font-size="15">Supplier</text>

            <use xlink:href="#power_pole" x="-10" y="20"/>

            <text id="supplier_power"
                  x="65" y="220" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="25">12.345</text>
            <text x="65" y="260" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="20">W</text>
        </g>
        <g id="home_field">
            <rect width="250" height="110" rx="10" fill="grey"/>
            <rect x="0.5" y="0.5" width="249" height="109" rx="10"
                  clip-path="url(#clipGreen)"
                  class="greenEnergyBackground greenEnergyStroke"/>
            <rect x="0.5" y="0.5" width="249" height="109" rx="10"
                  transform="rotate(180,125,55)"
                  clip-path="url(#clipRed)"
                  class="redEnergyBackground redEnergyStroke"/>

            <text x="175" y="25" text-anchor="middle"
                  fill="white"
                  font-family="sans-serif" font-size="15">Home</text>

            <use xlink:href="#house" x="20" y="5" transform="scale(0.8)"/>

            <text id="home_power"
                  x="175" y="65" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="25">12.345</text>
            <text x="175" y="95" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="20">W</text>
        </g>
        <g id="battery_field">
            <rect width="250" height="110" rx="10" fill="grey"/>
            <rect id="battery_green"
                  width="250" height="110" rx="10"
                  class="greenEnergyBackground greenEnergyStroke"/>

            <text x="175" y="25" text-anchor="middle"
                  fill="white"
                  font-family="sans-serif" font-size="15">Battery</text>

            <use xlink:href="#battery" x="90" y="10" transform="scale(0.75)"/>

            <text id="battery_power"
                  x="175" y="65" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="25">12.345</text>
            <text x="175" y="95" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="20">W</text>

            <text id="battery_charge"
                  x="35" y="55" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="20">42</text>
            <text x="35" y="85" text-anchor="middle"
                  font-weight="bold" fill="white"
                  font-family="sans-serif" font-size="25">%</text>
        </g>
    </defs>

    <!--<rect x="2" y="2" width="796" height="446" fill="lightgrey"/>-->

    <g id="transfer_solar_to_supplier">
        <use xlink:href="#arrow_long" x="186" y="40"
             class="greenEnergyBackground"/>
        <use xlink:href="#arrow_long" x="186" y="40"
             class="greenEnergyStroke"
             fill="url(#transferPattern)"/>
    </g>
    <g id="transfer_solar_to_home">
        <use xlink:href="#arrow" x="187" y="143"
             class="greenEnergyBackground"/>
        <use xlink:href="#arrow" x="187" y="143"
             class="greenEnergyStroke"
             fill="url(#transferPattern)"/>
    </g>
    <g id="transfer_solar_to_battery">
        <use xlink:href="#arrow" x="187" y="325"
             class="greenEnergyBackground"/>
        <use xlink:href="#arrow" x="187" y="325"
             class="greenEnergyStroke"
             fill="url(#transferPattern)"/>
    </g>
    <g id="transfer_battery_to_home">
        <use xlink:href="#arrow" transform="translate(377,282) rotate(-90)"
             class="greenEnergyBackground"/>
        <use xlink:href="#arrow" transform="translate(377,282) rotate(-90)"
             class="greenEnergyStroke"
             fill="url(#transferPattern)"/>
    </g>
    <g id="transfer_supplier_to_home">
        <use xlink:href="#arrow" transform="translate(605,182) rotate(180)"
             class="redEnergyBackground"/>
        <use xlink:href="#arrow" transform="translate(605,182) rotate(180)"
             class="redEnergyStroke"
             fill="url(#transferPattern)"/>
    </g>

    <use xlink:href="#solar_field" x="20" y="20" transform="scale(1.3)"/>
    <use xlink:href="#supplier_field" x="460" y="20" transform="scale(1.3)"/>
    <use xlink:href="#home_field" x="180" y="70" transform="scale(1.3)"/>
    <use xlink:href="#battery_field" x="180" y="210" transform="scale(1.3)"/>
</svg>